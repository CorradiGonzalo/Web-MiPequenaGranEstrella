{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="cart-container">
    <h2>Tu Carrito de Compras</h2>

    {% if not cart or not items %}
        <div class="empty-cart">
            <p>Tu carrito est√° vac√≠o üò¢</p>
            <a href="{% url 'store:home' %}" class="btn-primary">Ir a la Tienda</a>
        </div>
    {% else %}
        <div class="cart-header">
            <div class="col-product">PRODUCTO</div>
            <div class="col-size">TALLE</div>
            <div class="col-price">PRECIO</div>
            <div class="col-qty">CANTIDAD</div>
            <div class="col-total">TOTAL</div>
        </div>

        <div class="cart-items-list">
            {% for item in items %}
            <div class="cart-row">
                <div class="col-product product-info">
                    {% if item.product.image %}
                        <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}">
                    {% else %}
                        <div class="placeholder-img"></div>
                    {% endif %}
                    <span>{{ item.product.name }}</span>
                </div>

                <div class="col-size">
                    <span class="badge">{{ item.stock_item.size.name }}</span>
                </div>

                <div class="col-price">
                    ${{ item.product.price }}
                </div>

                <div class="col-qty">
                    {{ item.quantity }}
                </div>

                <div class="col-total">
                    <strong>${{ item.total_price }}</strong>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="cart-summary">
            <p class="timer-warning">
                Ten√©s 15 minutos para completar la compra o tus productos volver√°n a estar disponibles.
            </p>
            <h3>Total a Pagar: <span>${{ total }}</span></h3>
            
            <div class="cart-actions">
                <a href="{% url 'store:home' %}" class="btn-outline">‚Üê Seguir Comprando</a>
                <a href="#" class="btn-primary">Finalizar Compra</a>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}